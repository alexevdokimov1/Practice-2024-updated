# МЕТОДИКА ОПЕРАТИВНОЙ ОЦЕНКИ ОТКЛОНЕНИЙ ФАКТИЧЕСКОЙ ТРАЕКТОРИИ ДВИЖЕНИЯ НОСИТЕЛЯ ОТ РАСЧЁТНОЙ

## Цель работы
Изучить методы оперативной оценки отклонения фактической траектории движения носителя от расчётной.

## Задачи работы
Разработать программу, позволяющую оценить отклонение фактической траектории носителя от расчётной.

### Аннотация
Программа написана на языке С++ с использованием компилятора MinGW. Программа принимает на вход два файла: 
 * файл с расчетными данными из 4 значений для каждого измерения: время, x значение, y значение, z значение.
 * файл с фактическими данными из 4 значений для каждого измерения: время, x значение, y значение, z значение.

Выходной файл представляет собой данные представленные в виде:
* время, 
* $∆x$, 
* $∆y$
* $∆z$. 

Каждому картежу из файла с фактическими данными соответствует кортеж в результирующем файле.


## Теоретическая часть. Основные понятия
Основная задача боевого расчета баллистического обеспечения при проведении репортажа о пуске и полёте изделия заключается в оперативной оценке соответствия значений опытных параметров движения расчётным значениям. В качестве основных средств фиксирования траекторных параметров на активном участке траектории в настоящее время, как правило, используются приборы внешнетраекторных измерений.
Анализ движения проводится в реальном масштабе времени на основании регистрации быстроменяющихся параметров, таких как координаты и проекции скорости на оси гринвичской относительной системы координат (ГОСК) или инерциальной стартовой системы координат (ИССК). Частота изменения, количество, точность и достоверность представления контролируемых параметров создают значительные трудности для оперативного анализа, а способы ее представления и отображения нередко делают эту задачу практически невыполнимой.
## Задача
В качестве исходной информации о параметрах расчётной траектории в пространстве используются: расчетные значения составляющих радиус-вектора положения ракеты в ИССК.
Вектор фактического положения ракеты-носителя gjkexftncz по данным прибора ВТИ в ГОСК или по  результатам расчёта навигационной задачи в ИССК.

Необходимо для времени $t$, на основании имеющихся значений фактического положения носителя $x^Ф$, по расчётному положению  и функциям изменения $Y^{РФ}$ и $Z^{РФ}$ определить наименьшую разницу между векторами, определяющую вариации составляющих векторов расчётного и фактического положений.

## Алгоритм
ИССК описывает положение изделия в пространстве в виде гладкой и неразрывной кривой, поэтому, при использовании координаты $ξ$ в качестве аргумента, можно описать изменения координат протяжении всей траектории через совокупность кривых второго порядка.
Таким образом, расчётная траектория после обработки представляется как последовательность кривых второго порядка. Расчёт коэффициентов для кривых второго порядка возможен по методу наименьших квадратов.
В таком случае, можно однозначно рассчитать текущее положение точки на расчётной траектории в инерциальном пространстве.
Поиск кратчайшего расстояния от текущей точки опытной траектории с координатами $x^0$,$y^0$ до данной кривой сводится к нахождению точки $x*$,$y*∈f(x)$, такой, что расстояние $L(1)$ минимально.

$L_{min}=\sqrt{(x^*-x_0)^2+(y^*-y_0)^2} (1)$

Учитывая, что квадратный корень - монотонно возрастающая функция, очевидно, что экстремумы функций L и L2 совпадают. Таким образом, решение задачи сводится к решению уравнения 2.

$2*a*x+b*(a*x^2+b*x+c-y_0)+x=x_0 (2)$

Действительный корень этого уравнения и будет решением. 
Для вычисления отклонений по 3 координатам найдём $y^*$,$z^*$, используя найденный корень.

## Практическая часть. Реализация задачи
Задача была реализована с помощью С++.
### Файл main.cpp

В программе создаются 2 вектора: расчётные и фактические данные. Обращение к массивам time,x,y,z происходит по индексам 0,1,2,3 соответственно. Запускается процедура, получающая указатель на вектор, позволяющая загрузить данные из файла. 
Такая процедура запускается 2 раза: 
* для получения данных из файла Real.txt, содержащего опытные данные,
* для получения данных из файла Calculated.txt, содержащего расчётные данные. 

Вызывается открытие нового файла на запись с целью улучшения производительности программы из-за отсутствия необходимости записи полученных отклонений в оперативную память. Далее программа совершает проход по массиву опытных данных. Каждый цикл запускается внутренний цикл, проходящий по массиву расчётных данных. Во внутреннем цикле проверяется условие нахождения опытной точки среди двух расчётных точек. Если условие верно, то вызывается функция, которая аппроксимирует 4 точки расчётных данных и возвращает вектор из коэффициентов a,b,c для уравнения ax2+bx+c. Данная функция запускается 3 раза для получения коэффициентов a,b,c для векторов y, z расчётных данных. Находим корень уравнения 2 методом бисекции (метод средней линии), вызывая соответствующую функцию. После нахождения корня, находим y*, z*, используя x полученные ранее коэффициенты. Из полученных значений x*, y*, z* вычитаем значения x0,y0,z0 из вектора опытных данных. Полученные разности записываем в файл.
Для оптимизации нахождения таких расчётных значений, при которых опытная точка находилась между двумя расчётными, был добавлена переменная начального значения перебора расчётных значений, учитывая, что данные идут по возрастанию. При нахождении нужного значения, записывается текущая позиция, в которой условие было выполнено. Также для недопущения пропуска точек, каждое найденное начальное значение записывается со смещение в 4 единицы назад (если возможно).
В случае нахождения нужной точки, удовлетворяющей условию, происходит прерывание внутреннего цикла.
По завершению внешнего цикла происходит закрытие файла и завершения программы.

### Файлы
* main.cpp - основной файл программы
* FileOperations.h - заголовочный файл для работы с файлами
* FileOperations.cpp - файл для работы с файлами
* Approximation.h - заголовочный файл для работы с аппроксимацией
* Approximation.cpp - файл для работы с аппроксимацией
* Function.h - заголовочный файл для работы с функциями
* Function.cpp - файл для работы с функциями
* Gauss.h - заголовочный файл для работы с методом Гаусса
* Gauss.cpp - файл для работы с методом Гаусса










